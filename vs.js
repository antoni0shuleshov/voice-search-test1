(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{"webkitSpeechRecognition"in window?function(){let e=document.querySelectorAll("form[role=search]");0===e.length&&(e=document.querySelectorAll("form[class=searchform]")),0===e.length&&(e=document.querySelectorAll("form[id=searchform]")),[...e].forEach((e=>{!function(e){const t=e.style.cssText||"",__=(e,t)=>e;e.style.display="block !important";const n=e.querySelector("input[name=s]")||e.querySelector("input[name=search]");if(null===n)return void(e.style.cssText=t);e.classList.add("voice-search-wrapper"),n.classList.add("voice-search-input"),e.addEventListener("keypress",(t=>{if(t.keyCode&&13===t.keyCode)return e.submit(),!1}),{capture:!0});const o=document.createElement("button");o.setAttribute("class","voice-search-button");const s=document.createElement("span");s.setAttribute("class","voice-search-screen-reader-text"),s.appendChild(document.createTextNode(__("Speech Input"))),o.appendChild(s);const c=document.createElement("span");c.setAttribute("class","voice-search-mic"),c.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 0 24 24" width="30">\n\t<path d="M0 0h24v24H0z" fill="none"/>\n\t<path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>\n</svg>',o.appendChild(c),e.appendChild(o),e.cssText=t;let r,l,i="",a=!1,u=null;const d=new window.webkitSpeechRecognition;function p(){r=setTimeout((()=>{d.stop()}),3e3)}d.continuous=!0,d.lang="en-US",d.interimResults=!1,d.maxAlternatives=1,d.onstart=()=>{console.log("onstart"),u=n.placeholder,n.placeholder=__("Start Talkingâ€¦"),a=!0,o.classList.add("listening"),p(),clearTimeout(l)},d.onend=()=>{a=!1,console.log("onend"),clearTimeout(r),o.classList.remove("listening"),null!==u&&(n.placeholder=u),l=setTimeout((()=>{a||console.log("submitTimeout")}),100)},d.onerror=e=>{diagnostic.textContent=`Error occurred in recognition: ${e.error}`},d.onspeechstart=e=>{console.log("onspeechstart"),console.log(e)},d.onresult=e=>{clearTimeout(r),console.log(e);for(let t=e.resultIndex;t<e.results.length;++t)e.results[t].isFinal&&(i+=e.results[t][0].transcript);var t;i=(t=i).length?t[0].toUpperCase()+t.slice(1):t,n.value=i,p()},o.addEventListener("click",(e=>{e.preventDefault(),a?d.stop():(n.value=i="",d.start())}),!1)}(e)}))}():console.log("Web Speech API is not supported by this browser.")}))})();