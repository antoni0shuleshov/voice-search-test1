(()=>{"use strict";function e(e){return e=parseInt(e,10),isNaN(e)||null==e?0:e}document.addEventListener("DOMContentLoaded",(()=>{"webkitSpeechRecognition"in window?function(){let t=document.querySelectorAll("form[role=search]");0===t.length&&(t=document.querySelectorAll("form[class=searchform]")),0===t.length&&(t=document.querySelectorAll("form[id=searchform]")),[...t].forEach((t=>{!function(t){const n=t.style.cssText||"",__=(e,t)=>e;t.style.display="block !important";const o=t.querySelector("input[name=s]")||t.querySelector("input[name=search]");if(null===o)return void(t.style.cssText=n);t.classList.add("voice-search-wrapper"),o.classList.add("voice-search-input"),t.addEventListener("keypress",(e=>{if(e.keyCode&&13===e.keyCode)return t.submit(),!1}),{capture:!0});const s=document.createElement("button");s.setAttribute("class","voice-search-button");const r=document.createElement("span");r.setAttribute("class","voice-search-screen-reader-text"),r.appendChild(document.createTextNode(__("Speech Input"))),s.appendChild(r);const l=document.createElement("span");l.setAttribute("class","voice-search-mic"),l.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 0 24 24" width="30">\n\t<path d="M0 0h24v24H0z" fill="none"/>\n\t<path d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"/>\n</svg>',s.appendChild(l);const c=t.getBoundingClientRect(),i=o.getBoundingClientRect(),a={top:i.top-c.top,right:i.right-c.right,bottom:i.bottom-c.bottom,left:i.left-c.left},u=e(o.offsetHeight),d=e(.8*u),p=e(.1*u)+e(window.getComputedStyle(t).getPropertyValue("padding-top"));s.style.cssText=`\n\t\ttop: ${p+a.top}px;\n\t\theight: ${d}px !important;\n\t\twidth: ${d}px !important;\n\t\tright: ${Math.abs(a.right)}px !important;\n\t`,"rtl"===document.documentElement.dir&&(s.style.right=null,s.style.left=`left: ${a.left}px !important;`),t.appendChild(s),t.cssText=n;let h,m,g="",f=!1,v=null;const w=new window.webkitSpeechRecognition;function y(){h=setTimeout((()=>{w.stop()}),3e3)}w.continuous=!0,w.lang="en-US",w.interimResults=!1,w.maxAlternatives=1,w.onstart=()=>{console.log("onstart"),v=o.placeholder,o.placeholder=__("Start Talkingâ€¦"),f=!0,s.classList.add("listening"),y(),clearTimeout(m)},w.onend=()=>{f=!1,console.log("onend"),clearTimeout(h),s.classList.remove("listening"),null!==v&&(o.placeholder=v),m=setTimeout((()=>{f||console.log("submitTimeout")}),100)},w.onerror=e=>{diagnostic.textContent=`Error occurred in recognition: ${e.error}`},w.onspeechstart=e=>{console.log("onspeechstart"),console.log(e)},w.onresult=e=>{clearTimeout(h),console.log(e);for(let t=e.resultIndex;t<e.results.length;++t)e.results[t].isFinal&&(g+=e.results[t][0].transcript);var t;g=(t=g).length?t[0].toUpperCase()+t.slice(1):t,o.value=g,y()},s.addEventListener("click",(e=>{e.preventDefault(),f?w.stop():(o.value=g="",w.start())}),!1)}(t)}))}():console.log("Web Speech API is not supported by this browser.")}))})();